<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="google" content="notranslate">
<title>Event Tail</title>
<style>
  html,body {
    margin:0; height:100%;
    background:#000; color:#0f0;
    font-family: monospace;
    font-size:12px;
  }
  #log {
    height:100%;
    overflow:auto;
    padding:8px;
    white-space:pre;
  }
</style>
</head>
<body>
<div id="log"></div>

<script>
let last = performance.now();
let i = 0;
const log = document.getElementById("log");

function add(e, type, info) {
  e.preventDefault();
  const now = performance.now();
  const dt = (now - last).toFixed(1);
  last = now;
  i++;
  log.textContent += `${i}  +${dt}ms  ${type} ${info}\n`;
  log.scrollTop = log.scrollHeight;
}

window.addEventListener("touchstart",  e => add(e, "touch:start",  `n=${e.touches.length}`), {passive:true});
window.addEventListener("touchmove",   e => add(e, "touch:move",   `n=${e.touches.length}`), {passive:true});
window.addEventListener("touchend",    e => add(e, "touch:end",    `n=${e.touches.length}`), {passive:true});
window.addEventListener("touchcancel", e => add(e, "touch:cancel", `n=${e.touches.length}`), {passive:true});

window.addEventListener("keydown", e => {
  if (e.code === "F19") {
    e.preventDefault();
    e.stopImmediatePropagation();
  }
}, true);
window.addEventListener("keyup", e => {
  if (e.code === "F19") {
    e.preventDefault();
    e.stopImmediatePropagation();
  }
}, true);

// window.addEventListener("blur", () => add("window:blur", ""), true);
document.addEventListener("visibilitychange", () => add("doc:visibility", document.visibilityState));
</script>
</body>
</html>
